{% load compress %}
{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
{% include "base_head.html" %}
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="{% static 'servers/config_page.css' %}">
</head>

<body dir="">
    {% include "navbar.html" %}
    {% include 'messages.html' %}
<div id="main">
        <h3 id="conf_name">{{ config_name }}</h3>
        <div id="box0" dir="rtl">
        {% if config_info %}
            <h3 class="c_info">Ø³Ø±ÙˆØ±: {{ config_info.server.server_name }}</h3>
            {% if config_info.chat_id == none %}
                <h3 class="c_info">ÛŒÙˆØ²Ø±: ----</h3>
             {% else %}
                <h3 class="c_info">ÛŒÙˆØ²Ø±: <a style="color: white" href="{% url 'customers:custumer_detail' config_info.chat_id.userid %}">{{ config_info.chat_id.userid }}</a></h3>
            {% endif %}
            <h3 class="c_info">Ø³Ø§Ø®ØªÙ‡ ØªÙˆØ³Ø·: {{ config_info.created_by }}</h3>
            <h3 class="c_info">Ù…Ø¨Ù„Øº: {{ config_info.price }} T</h3>
            {% if config_info.paid %}
            <h3 class="c_info">Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡: âœ…</h3> {% else %} <h3 class="c_info">Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡: âŒ</h3>
            {% endif %}
        {% else %}
            <h3 class="text_error">â— Ú©Ø§Ù†ÙÛŒÚ¯ Ø¯Ø± Ø¨Ø§Øª Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. â—</h3>
        {% endif %}
        </div>
        <div id="box1">
        {% if config_usage %}
            <div class="show_usage">
                {% if config_usage.usage_limit == 0  %}
                    <div class="centering">
                        <h4 class="usage_text">{{ config_usage.usage|floatformat:2 }}GB / <span style="font-size: x-large">âˆ</span></h4>
                        <div class="progress progressÙ€usage_box">
                            {% if config_usage.started %}
                                <div class="progressÙ€usage progress-bar bg-unlimit" role="progressbar" style="width: 100%" aria-confinfonow="100" aria-confinfomin="0" aria-confinfomax="100">âˆ</div>
                            {% else %}
                                <div class="progressÙ€usage progress-bar bg-success" role="progressbar" style="width:100%" aria-confinfonow="100" aria-confinfomin="0" aria-confinfomax="100">Not Started</div>
                            {% endif %}
                        </div>
                    </div>
                {% else %}
                    {% if config_usage.usage|percent:config_usage.usage_limit > 99 %}
                        <div class="centering">
                            <h4 class="usage_text">{{ config_usage.usage|floatformat:2 }}GB /{{ config_usage.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                <div class="progressÙ€usage progress-bar bg-danger" role="progressbar" style="width: {{ config_usage.usage|percent:config_usage.usage_limit }}%" aria-confinfonow="{{ config_usage.usage|percent:config_usage.usage_limit }}" aria-confinfomin="0" aria-confinfomax="100">{{ config_usage.usage|percent:config_usage.usage_limit }}%</div>
                            </div>
                        </div>
                    {% elif config_usage.usage|percent:config_usage.usage_limit > 95 %}
                        <div class="centering">
                            <h4 class="usage_text">{{ config_usage.usage|floatformat:2 }}GB /{{ config_usage.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                <div class="progressÙ€usage progress-bar bg-warning" role="progressbar" style="width: {{ config_usage.usage|percent:config_usage.usage_limit }}%" aria-confinfonow="{{ config_usage.usage|percent:config_usage.usage_limit }}" aria-confinfomin="0" aria-confinfomax="100">{{ config_usage.usage|percent:config_usage.usage_limit }}%</div>
                            </div>
                        </div>
                    {% elif config_usage.usage|percent:config_usage.usage_limit > 0 %}
                        <div class="centering">
                            <h4 class="usage_text">{{ config_usage.usage|floatformat:2 }}GB /{{ config_usage.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                <div class="progressÙ€usage progress-bar bg-info" role="progressbar" style="width: {{ config_usage.usage|percent:config_usage.usage_limit }}%" aria-confinfonow="{{ config_usage.usage|percent:config_usage.usage_limit }}" aria-confinfomin="0" aria-confinfomax="100">{{ config_usage.usage|percent:config_usage.usage_limit }}%</div>
                            </div>
                        </div>
                    {% else %}
                        <div class="centering">
                            <h4 class="usage_text">{{ config_usage.usage|floatformat:2 }}GB /{{ config_usage.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                {% if config_usage.started  %}
                                    <div class="progressÙ€usage progress-bar bg-info" role="progressbar" style="width:0%" aria-confinfonow="0" aria-confinfomin="0" aria-confinfomax="100">0%</div>
                                {% else %}
                                    <div class="progressÙ€usage progress-bar bg-success" role="progressbar" style="width:100%" aria-confinfonow="{{ config_usage.3 }}" aria-confinfomin="0" aria-confinfomax="100">Not Started</div>
                                {% endif %}
                            </div>
                        </div>
                    {% endif %}
                {% endif %}
            </div>
            <div class="show_usage">
                {% if config_usage.time_expire == 0 %}
                    <div class="time">
                        <h4 class="expire_text blue_infinite">âˆ day</h4>
                    </div>
                {% elif config_usage.exp_time_sta is False and config_usage.time_expire > 3 %}
                    <div class="time">
                        <h4 class="expire_text blue ">{{ config_usage.time_expire|dh }} day</h4>
                    </div>
                {% elif config_usage.exp_time_sta is False and config_usage.time_expire > 0 %}
                    <div class="time">
                        <h4 class="expire_text orange">{{ config_usage.time_expire|dh }} day</h4>
                    </div>
                {% elif config_usage.time_expire < 0 and config_usage.exp_time_sta is False %}
                    <div class="time">
                        <h4 class="expire_text green">{% widthratio config_usage.time_expire 1 -1 %} day</h4>
                    </div>
                {% else %}
                    <div class="time">
                        <h4 class="expire_text red">{{ config_usage.time_expire|dh }} day ago</h4>
                    </div>
                {% endif %}
            </div>
        {% else %}
            <h3 class="text_error">â— Connection Error â—</h3>
        {% endif %}
        </div>

        <div id="box2">
            <div>
                <div class="btnslist">
                    <button dir="rtl" class="btn" onclick="copyToClipboard('#bot_link')">ğŸ“‹ Ù„ÛŒÙ†Ú© Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯ ğŸ“‹</button>
                </div>
                <div class="btnslist">
                    <button class="btn" onclick="copyToClipboard('#vless')">ğŸ“¡ Ú©Ù¾ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯ ğŸ“¡</button>
                </div>



                    <p hidden id="vless">{{ vless }}</p>
                    <p hidden id="bot_link" style="white-space: pre-line;">{{ get_config_link }}</p>
            </div>
        </div>

<script>
            function copyToClipboard(element) {
          var $temp = $("<textarea>");
          $("body").append($temp);
          var text = $(element).text();
          $temp.val(text).select();
          document.execCommand("copy");
          $temp.remove();
          alert("Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯.");
        }
        </script>

    </div>
{% include "loading.html" %}

</body>
</html>